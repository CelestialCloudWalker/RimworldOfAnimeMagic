<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <AnimeArsenal.TalentedLevelingAbilityDef>
    <defName>Blood_Demon_Arts_Devour</defName>
    <label>Blood Demon Art: Devour</label>
    <category>BloodDemonArts_AbilityCaterogry</category>
    <groupDef>Blood_Demon_Arts_Devour_Group</groupDef>
    <description>Devour a target to heal wounds and restore blood demon arts energy. Can target corpses or living enemies. Gains experience with each use and becomes more powerful.</description>
    <iconPath>UI/Abilities/DemonEatAbilityIcon</iconPath>
    <cooldownTicksRange>3600</cooldownTicksRange>
    <aiCanUse>true</aiCanUse>
    <targetRequired>true</targetRequired>
    <hostile>true</hostile>
    <casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>

    
    <requiredGeneDefName>BloodDemonArt</requiredGeneDefName>
    <resourceCost>20</resourceCost>
    <baseExperienceGain>15</baseExperienceGain>
    <showExperienceInTooltip>true</showExperienceInTooltip>

    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>1.5</range>
      <warmupTime>1.5</warmupTime>
      <soundCast>Pawn_Melee_Punch_HitPawn</soundCast>
      <targetParams>
        <canTargetPawns>true</canTargetPawns>
        <canTargetCorpses>true</canTargetCorpses>
      </targetParams>
    </verbProperties>

    
    <comps>
      <li Class="AnimeArsenal.AbilityCompProperties_DemonConsume">
        <nutritionGain>0.8</nutritionGain>
        <canTargetCorpses>true</canTargetCorpses>
        <canTargetLiving>false</canTargetLiving>
        <healAmount>15</healAmount>
        <resourceRestore>10</resourceRestore>
        <bloodlustSeverity>1.0</bloodlustSeverity>
        <drainSeverity>1.0</drainSeverity>
        <range>1.5</range>
        <maxTargets>1</maxTargets>
        <areaOfEffect>false</areaOfEffect>
        <instantKillChance>0</instantKillChance>
      </li>
    </comps>

    <levels>
      
      <li>
        <labelSuffix> (Novice)</labelSuffix>
        <experienceRequired>0</experienceRequired>
        <description>Basic consumption ability that restores health and energy from fallen enemies.</description>
        <cumulativeEffects>false</cumulativeEffects>
        <cooldownMultiplier>1.0</cooldownMultiplier>
        <resourceCostMultiplier>1.0</resourceCostMultiplier>
        <levelComps>
          <li Class="AnimeArsenal.AbilityCompProperties_DemonConsume">
            <nutritionGain>0.8</nutritionGain>
            <canTargetCorpses>true</canTargetCorpses>
            <canTargetLiving>false</canTargetLiving>
            <healAmount>15</healAmount>
            <resourceRestore>10</resourceRestore>
            <bloodlustSeverity>1.0</bloodlustSeverity>
            <drainSeverity>1.0</drainSeverity>
            <range>1.5</range>
            <maxTargets>1</maxTargets>
            <areaOfEffect>false</areaOfEffect>
            <instantKillChance>0</instantKillChance>
          </li>
        </levelComps>
      </li>

      
      <li>
        <labelSuffix> (Adept)</labelSuffix>
        <experienceRequired>100</experienceRequired>
        <description>Enhanced consumption that provides greater healing and can drain life from living targets.</description>
        <cumulativeEffects>false</cumulativeEffects>
        <cooldownMultiplier>0.9</cooldownMultiplier>
        <resourceCostMultiplier>0.95</resourceCostMultiplier>
        <levelComps>
          <li Class="AnimeArsenal.AbilityCompProperties_DemonConsume">
            <nutritionGain>1.0</nutritionGain>
            <canTargetCorpses>true</canTargetCorpses>
            <canTargetLiving>true</canTargetLiving>
            <healAmount>25</healAmount>
            <resourceRestore>15</resourceRestore>
            <bloodlustSeverity>1.2</bloodlustSeverity>
            <drainSeverity>2.0</drainSeverity>
            <range>2.0</range>
            <maxTargets>1</maxTargets>
            <areaOfEffect>false</areaOfEffect>
            <instantKillChance>0</instantKillChance>
          </li>
        </levelComps>
      </li>

      
      <li>
        <labelSuffix> (Expert)</labelSuffix>
        <experienceRequired>250</experienceRequired>
        <description>Advanced consumption technique that can affect multiple targets and provides significant regeneration.</description>
        <cumulativeEffects>false</cumulativeEffects>
        <cooldownMultiplier>0.8</cooldownMultiplier>
        <resourceCostMultiplier>0.9</resourceCostMultiplier>
        <levelComps>
          <li Class="AnimeArsenal.AbilityCompProperties_DemonConsume">
            <nutritionGain>1.2</nutritionGain>
            <canTargetCorpses>true</canTargetCorpses>
            <canTargetLiving>true</canTargetLiving>
            <healAmount>40</healAmount>
            <resourceRestore>25</resourceRestore>
            <bloodlustSeverity>1.5</bloodlustSeverity>
            <drainSeverity>3.0</drainSeverity>
            <range>2.5</range>
            <maxTargets>2</maxTargets>
            <areaOfEffect>true</areaOfEffect>
            <instantKillChance>0</instantKillChance>
          </li>
        </levelComps>
      </li>

      
      <li>
        <labelSuffix> (Master)</labelSuffix>
        <experienceRequired>500</experienceRequired>
        <description>Ultimate consumption mastery - can devour multiple enemies at once with devastating life drain and massive regeneration.</description>
        <cumulativeEffects>false</cumulativeEffects>
        <cooldownMultiplier>0.7</cooldownMultiplier>
        <resourceCostMultiplier>0.8</resourceCostMultiplier>
        <levelComps>
          <li Class="AnimeArsenal.AbilityCompProperties_DemonConsume">
            <nutritionGain>1.5</nutritionGain>
            <canTargetCorpses>true</canTargetCorpses>
            <canTargetLiving>true</canTargetLiving>
            <healAmount>60</healAmount>
            <resourceRestore>35</resourceRestore>
            <bloodlustSeverity>2.0</bloodlustSeverity>
            <drainSeverity>4.0</drainSeverity>
            <range>3.0</range>
            <maxTargets>3</maxTargets>
            <areaOfEffect>true</areaOfEffect>
            <instantKillChance>0.1</instantKillChance>
          </li>
        </levelComps>
      </li>
    </levels>
  </AnimeArsenal.TalentedLevelingAbilityDef>

  
  <ThoughtDef>
    <defName>DemonConsumptionMemory</defName>
    <durationDays>3</durationDays>
    <stackLimit>10</stackLimit>
    <stackLimitForSameOtherPawn>1</stackLimitForSameOtherPawn>
    <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
    <stages>
      <li>
        <label>consumed flesh</label>
        <description>I devoured another being. The power flows through me.</description>
        <baseMoodEffect>5</baseMoodEffect>
        <baseOpinionOffset>0</baseOpinionOffset>
      </li>
    </stages>
  </ThoughtDef>

  <ThoughtDef>
    <defName>WitnessedDemonConsumptionMemory</defName>
    <durationDays>5</durationDays>
    <stackLimit>5</stackLimit>
    <stackLimitForSameOtherPawn>1</stackLimitForSameOtherPawn>
    <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
    <stages>
      <li>
        <label>witnessed demon consumption</label>
        <description>I saw someone devour another person like a monster. It was horrifying.</description>
        <baseMoodEffect>-15</baseMoodEffect>
        <baseOpinionOffset>-20</baseOpinionOffset>
      </li>
    </stages>
  </ThoughtDef>

  <HediffDef>
    <defName>DemonBloodlust</defName>
    <label>demon bloodlust</label>
    <description>The taste of flesh has awakened a demonic hunger.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.8, 0.2, 0.2)</defaultLabelColor>
    <isBad>false</isBad>
    <maxSeverity>5.0</maxSeverity>
    <initialSeverity>1.0</initialSeverity>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.5</severityPerDay>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>1.0</minSeverity>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <offset>0.15</offset>
          </li>
          <li>
            <capacity>Manipulation</capacity>
            <offset>0.10</offset>
          </li>
        </capMods>
        <statOffsets>
          <MeleeHitChance>5</MeleeHitChance>
          <MeleeDodgeChance>10</MeleeDodgeChance>
        </statOffsets>
      </li>
      <li>
        <minSeverity>3.0</minSeverity>
        <label>intense bloodlust</label>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <offset>0.25</offset>
          </li>
          <li>
            <capacity>Manipulation</capacity>
            <offset>0.20</offset>
          </li>
        </capMods>
        <statOffsets>
          <MeleeHitChance>10</MeleeHitChance>
          <MeleeDodgeChance>15</MeleeDodgeChance>
        </statOffsets>
      </li>
    </stages>
  </HediffDef>

  <HediffDef>
    <defName>DemonDrain</defName>
    <label>demon drain</label>
    <description>Life force is being drained by demonic consumption.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.5, 0.1, 0.1)</defaultLabelColor>
    <isBad>true</isBad>
    <maxSeverity>10.0</maxSeverity>
    <initialSeverity>1.0</initialSeverity>
    <lethalSeverity>8.0</lethalSeverity>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.3</severityPerDay>
      </li>
    </comps>
    <stages>
      <li>
        <minSeverity>1.0</minSeverity>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.10</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.15</offset>
          </li>
        </capMods>
      </li>
      <li>
        <minSeverity>3.0</minSeverity>
        <label>severe drain</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.25</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.30</offset>
          </li>
          <li>
            <capacity>BloodFiltration</capacity>
            <offset>-0.20</offset>
          </li>
        </capMods>
      </li>
      <li>
        <minSeverity>6.0</minSeverity>
        <label>critical drain</label>
        <lifeThreatening>true</lifeThreatening>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.50</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.60</offset>
          </li>
          <li>
            <capacity>BloodFiltration</capacity>
            <offset>-0.50</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
</Defs>
